!function(a){function e(a,e,m,t){t=t||1,e=e||4096/window.devicePixelRatio;var i=map.width/map.height;if(map.width>=map.height)var o=e/i;else e=(o=1448.5)*i;p.setSize(e,o),p.setClearColor(map.mapTheme.clearColor_),p.render(map.mapView.scene,map.currentCamera_),map.currentCamera_.updateProjectionMatrix();var r=p.domElement.toDataURL("image/png");return a&&a(r),r}function m(a){function e(){map.rotateAngle=0,map.mapView.cameraTop.zoom=1,map.mapView.cameraTop.left=-c,map.mapView.cameraTop.right=c,map.mapView.cameraTop.top=n,map.mapView.cameraTop.bottom=-n,map.mapView.cameraTop.updateProjectionMatrix()}a=a||1.14;var m=map.mapScene.box3_.max,p=map.mapScene.box3_.min,t=m.x-p.x,i=m.z-p.z,o=i,r=!1;t>i&&(r=!0,o=t),o=o/2*a;var n=r?o/map.mapView.camera.aspect:o,c=r?o:o*map.mapView.camera.aspect;map.moveToCenter({duration:0}),"3d"===map.viewMode?map.viewMode={mode:"top",duration:0,callback:function(){e()}}:e()}var p=new fm.WebGLRenderer({preserveDrawingBuffer:!0,antialias:!0,alpha:!0});p.setPixelRatio(window.devicePixelRatio);document.addEventListener("keyup",function(a){}),a.screenshot={shot:e,toPrintPose:m}}(this.fengmap=this.fengmap||{});